<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" >
<head>
    <title>Untitled Page</title>
     <script type="text/javascript" src="http://localhost/CDOCApps/CommonJS/jquery-1.8.3.js"></script>
    <script type="text/javascript" >
    function OnTextBtnclick(event)
    {
    	var btnID =  event.target.id; 
    	
    	if(btnID == 'selectbtn' )
    	{
    		var node = document.getElementById('text1');
        	var dim = node.getBBox(); 
        	var bdryRectNode = document.getElementById('bdryRect'); 
        	bdryRectNode.setAttribute('x',Math.round(dim.x)); 
        	bdryRectNode.setAttribute('y' , Math.round(dim.y)); 
        	bdryRectNode.setAttribute('width' , Math.round(dim.width)); 
        	bdryRectNode.setAttribute('height' , Math.round(dim.height)); 
        	alert('width=' + Math.round(dim.width) + 'textLength=' +  node.textLength ); 
    	}
    	/*
    	else if(btnID == 'editbtn' )
    	{
    		var node = document.getElementById('text1');
    		var dim = node.getBBox(); 
    		var editornode = document.getElementById('texteditor'); 
    		var str = node.firstChild.data; 
    		editornode.value= str; 
    		editornode.style.position = 'absolute'; 
    		editornode.style.left = Math.round(dim.x ) + 'px'; 
    		editornode.style.top = Math.round(dim.y ) + 'px';     		
    	}
    	*/
    	else if(btnID == 'editbtn' )
    	{    		 		
    		// get the divDVg node 
    		var containerSVGNode = document.getElementById('containersvg'); 
    		var editSVGNode  = document.getElementById('editablesvg'); 
    		var textnode = document.getElementById('text1');
    		var textcloneNode = textnode.cloneNode(true); 
    		textcloneNode.id = textnode.id + '_EDIT'; 
    		//copy the node to be edited 
    		//get the text node to be copied here  from the other SVG
    		var newNode = editSVGNode.appendChild(textcloneNode); 
    		// change the ID. and then add it to the divSVg 
    		//set the dimension of the div element to he bounding box 
    		//
    	}
    	
    	else if(btnID == 'savebtn' )
    	{
    		var origTextID = 'text1'; 
    		var origTextNode = document.getElementById('text1');
    		var editedTextNode = document.getElementById(origTextID + '_EDIT'); 
    		//var str = editornode.innerHTML ;//node.firstChild.data;
    		var str = editedTextNode.firstChild.data;
    		origTextNode.firstChild.data  = str;    		
    	}
    	
    	
    }
    </script>
</head>
<body>


 
<svg id='containersvg' width="1000px" height="1000px" viewBox="0 0 1000 1000" version="1.1"
     xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >
  <defs>
   
    
  </defs>
  <desc>Example toap01 - simple text on a path</desc>

  <use xlink:href="#VerticalPath" fill="none" stroke="red"  />
  
  
  <text id='text1' font-family="Verdana" font-size="30" fill="blue" x='0' y='30' contenteditable='true'>We go up, then we go down, 
  then up again</text>
	
	

  
  <rect id='bdryRect' x="1" y="1" width="998" height="998"
        fill="none" stroke="blue" stroke-width="2" />

</svg>

<div style='border:solid thin red; width:1000px; height:40px' contenteditable='true' >	
     <svg id='editablesvg' version="1.1" width='100%' height='100%' viewBox='0 0 1000  40' xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" ></svg>
</div>

<input type='button' id='selectbtn' onclick='OnTextBtnclick(event)' value='Select' />
<input type='button' id='editbtn' onclick='OnTextBtnclick(event)' value='Edit' />

<input type='button' id='savebtn' onclick='OnTextBtnclick(event)' value='Save' />

	
 
</div>
</body>
</html>


